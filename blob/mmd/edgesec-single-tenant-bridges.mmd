%% Proxmox Node - Edgesec Layout (Single Tenant, Color-Coded by Bridge)

```mermaid
graph LR

  %% Bridges (ordered left to right)
  MgmtBridge[vmbr0 - Management Bridge]
  VMBridge[vmbr1 - VM Bridge]
  ExtBridge[vmbr2 - External Bridge]


  %% Services
  VaultVM[edgesec-vault]
  RestVM[edgesec-rest]
  RadiusVM[edgesec-radius]
  DNSVM[edgesec-dns]
  ProxyVM[Traefik Proxy VM]


  %% Overlays
  VX10100(vxlan10100 - Management)
  VX10101(vxlan10101 - Engineering)
  VX10102(vxlan10102 - Support)
  VX10110(vxlan10110 - Tenant VM/Service)
  VX9000(vxlan9000 - DNS/Monitoring/edgesec-rest/edgesec-radius)
  VX9006(vxlan9006 - edgesec-vault)
  VX9003(vxlan9003 - Proxy Ext)
  VX10120(vxlan10120 - External)
  VXCEPH2(vxlan10031 - Ceph Cluster)
  VX10032(vxlan10032 - Core Services)

  Gateway1[Primary Gateway - ISP 1]
  Gateway2[Backup Gateway - ISP 2]
  LegacyVLAN[Legacy VLANs]

  Fabricd[fabricd - IS-IS Routing]

  %% Explicit bridge ordering
  MgmtBridge --> VMBridge --> ExtBridge

  %% Service VMs to overlays (all on vmbr1 except vault)
  VaultVM --> VX10032
  RestVM --> VX9000
  RadiusVM --> VX9000
  DNSVM --> VX9000
  ProxyVM --> VX9003
  ProxyVM --> ExtBridge
  %% Core Services VXLAN (new)
  MgmtBridge --> VX10032

  %% VM Bridge overlays (tenant/service and core services)
  VMBridge --> VX10110
  VMBridge --> VX9000
  VMBridge --> VX9006

  %% Management Bridge overlays (management, engineering, support, storage)
  MgmtBridge --> VX10100
  MgmtBridge --> VX10101
  MgmtBridge --> VX10102
  MgmtBridge --> VXCEPH2

  %% VXLANs to fabricd
  VX10100 --> Fabricd
  VX10101 --> Fabricd
  VX10102 --> Fabricd
  VX10110 --> Fabricd
  VX9000 --> Fabricd
  VX9006 --> Fabricd
  VX9003 --> Fabricd
  VX10120 --> Fabricd
  VXCEPH2 --> Fabricd
  VX10032 --> Fabricd

  %% External Bridge overlays (external, proxy_ext)
  ExtBridge --> VX9003
  ExtBridge --> VX10120

  %% External Bridge to Gateways
  ExtBridge --> Gateway1
  ExtBridge --> Gateway2

  %% External Bridge to Legacy VLANs
  ExtBridge --> LegacyVLAN

  %% Custom bridge colors
  classDef mgmt fill:#e3f2fd,stroke:#1976d2,stroke-width:2px;
  classDef vm fill:#fffde7,stroke:#fbc02d,stroke-width:2px;
  classDef ext fill:#fbe9e7,stroke:#d84315,stroke-width:2px;
  classDef proxy fill:#e8f5e9,stroke:#388e3c,stroke-width:2px;

  class MgmtBridge,VaultVM,VX10100,VX10101,VX10102,VXCEPH2,VX10032 mgmt;
  class VMBridge,RestVM,RadiusVM,DNSVM,ProxyVM,VX10110,VX9000,VX9006 vm;
  class ExtBridge,Gateway1,Gateway2,LegacyVLAN,VX9003,VX10120 ext;
```
