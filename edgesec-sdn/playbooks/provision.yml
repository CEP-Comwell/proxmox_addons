# Playbook: provision.yml
# Description: Provisions each Proxmox node (networks, bridges, base services + NIC naming)
# Usage: ansible-playbook -i ../../inventory provision.yml

- name: Provision Proxmox node
  hosts: proxmox-hosts
  become: true
  gather_facts: false
  vars:
    # Optional overrides; set these with -e when running if you want to control behavior
    # provision_confirm_before_apply: false
  roles:
    - prereqs           # Install prerequisite packages (jq, git, etc.)
    - network_provision  # Streamlined single role for interface naming and bridge creation
    - sdn_fabric_provision  # Provisions SDN fabric, VNETs, subnets, ports (never touches vmbr0)