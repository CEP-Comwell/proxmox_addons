# vmbr definitions for pve1.comwell.edgesec.ca
# Adjust normalized interface names (xg*/eth*) and tunnel endpoints to match
# the values discovered by the naming task on this host.
bridges:
  - name: vmbr99
    type: OVSBridge
    bridge_ports:
      - eth2
    mtu: 9000
    vlan_aware: true
    subinterfaces:
      - name: vxlan10031
        type: vxlan
        options:
          id: 10031
          mtu: 1400
      - name: vxlan10032
        type: vxlan
        options:
          id: 10032
          mtu: 1400
  - name: vmbr1
    type: OVSBridge
    bridge_ports:
      - eth1
    mtu: 9000
    vlan_aware: true
    subinterfaces:
      - name: vxlan9006
        type: vxlan
        options:
          id: 9006
          mtu: 1400
  - name: vmbr2
    type: Bridge
    bridge_ports:
      - xg1
    mtu: 1420
    subinterfaces:
      # gateway VLANs are defined as vlan subinterfaces elsewhere (vmbr2.11, vmbr2.100)
      # so the explicit gateway1/gateway2 entries are removed to avoid duplication.
      - name: vxlan9003
        type: vxlan
        options:
          id: 9003
          mtu: 1400
      - name: vmbr2.11
        type: vlan
        options:
          inet: static
          address: 172.16.11.20/24
          tag: 11
      - name: vmbr2.100
        type: vlan
        options:
          address: 10.10.31.20/24
          tag: 100
      # Note: vxlan9003 is an external proxy ingress attached to vmbr2 on this host.
      # Other VXLANs for tenant/fabric are typically instantiated on OVS bridges
      # (vmbr99/vmbr1) and therefore are not declared as vmbr2 subinterfaces here.
